ajaxlink($(".tambah-aset")),boxTool(),$("#formFilter").on("submit",function(a){a.preventDefault();var e=$(this);NProgress.start(),$(".right_col").load(e.prop("action"),e.serialize(),function(){NProgress.done()})}),$("[name=golongan]").change(function(){changeKategori($(this).val(),$("[name=bidang]"),"bidang"),changeKategori("",$("[name=kelompok]"),"kelompok"),changeKategori("",$("[name=subkelompok]"),"subkelompok"),changeKategori("",$("[name=kat]"),"kategori")}),$("[name=bidang]").change(function(){changeKategori($(this).val(),$("[name=kelompok]"),"kelompok"),changeKategori("",$("[name=subkelompok]"),"subkelompok"),changeKategori("",$("[name=kat]"),"kategori")}),$("[name=kelompok]").change(function(){changeKategori($(this).val(),$("[name=subkelompok]"),"subkelompok"),changeKategori("",$("[name=kat]"),"kategori")}),$("[name=subkelompok]").change(function(){changeKategori($(this).val(),$("[name=kat]"),"kategori")}),$("[name=kat]").change(function(){$("#formFilter").submit()}),$(".edit").each(function(){ajaxlink($(this))}),$(".preview").each(function(){$(this).click(function(){BootstrapDialog.show({type:BootstrapDialog.TYPE_INFO,title:'<i class="fa fa-eye fa-fw"></i> Detail Asset',message:function(a){var e=$("<div></div>"),t=a.getData("pageToLoad");return e.load(t),e},data:{pageToLoad:$(this).data("href")}})})}),$(".hapus").each(function(){$(this).click(function(){var a=$(this).parents("form"),e=$(this).data("barang"),t={};swal({title:"Apakah Anda yakin?",text:"Anda akan menghapus data "+e+"<br>Data yang dihapus tidak dapat dikembalikan",type:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#D9534F",cancelButtonColor:"#394D5F",confirmButtonText:"Ya, hapus data ini!",cancelButtonText:"Batal",preConfirm:function(){return new Promise(function(e){$("button.sweet-confirm").button("loading"),$.ajax({url:a.prop("action"),type:"POST",dataType:"json",data:a.serialize(),success:function(a){t=a,e()}})})}}).then(function(a){a&&$(".right_col").load("/asset",function(){swal({title:"Sukses!",text:t.message,type:t.status,timer:5e3,showCloseButton:!0,showConfirmButton:!1})})})})}),$("[name=findkategori]").autocomplete({autoFocus:!0,delay:0,source:function(a,e){$.ajax({headers:{"X-CSRF-TOKEN":$("[name=_token]").val()},url:"/autocomplete",type:"POST",dataType:"json",data:{q:a.term},success:function(a){e(a)}})},select:function(a,e){$("[name=findkategori]").val("");var t=$("#formFilter"),o={golongan:e.item.id_gol,bidang:e.item.id_bidang,kelompok:e.item.id_kelompok,subkelompok:e.item.id_subkelompok,kat:e.item.id,_token:$("[name=_token]").val()};return NProgress.start(),$(".right_col").load(t.prop("action"),o,function(){NProgress.done()}),!1}}).autocomplete("instance")._renderItem=function(a,e){var t=this.term,o=new RegExp("("+$.ui.autocomplete.escapeRegex(t)+")","gi"),n=e.kelompok.replace(o,'<strong class="text-warning">$&</strong>'),i=e.sub_kelompok.replace(o,'<strong class="text-warning">$&</strong>'),s=e.uraian.replace(o,'<strong class="text-warning">$&</strong>');return a.addClass("dropdown-menu"),$("<li>").addClass("dropdown-item").append("<a><small>"+e.golongan+" > "+e.bidang+" > "+n+"</small><br>"+i+" > "+s+"</a>").appendTo(a)};